{"pages":[{"title":"about","text":"关于博客这是一个兴趣使然的技术博客，不定期分享自己整理的知识（前提是自己有时间，还有掌握了~)","link":"/about/index.html"},{"title":"文章分类","text":"","link":"/categories/index.html"},{"title":"标签","text":"","link":"/tags/index.html"}],"posts":[{"title":"Hello World","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1hexo new &quot;My New Post&quot; More info: Writing Run server1hexo server More info: Server Generate static files1hexo generate More info: Generating Deploy to remote sites1hexo deploy More info: Deployment","link":"/2018/08/26/hello-world/"},{"title":"Linux 安装并配置最新的MongoDB","text":"一、前言目前的稳定版本 是4.2.X，截止至20年4月初的最新是4.2.5，也推荐安装此版本，也可以尝鲜，安装4.3.X的unstable版本。目前最新的是4.3.5。 本文主要讲解 CentOS 8 如何安装配置 MongoDB 4.2.5。 二、下载方式 官方下载 各 Linux 包管理安装 各系统对应的安装包安装 源码系统本地编译 三、CentOS yum安装3.1 配置yum仓库源配置mongodb-org-4.2版本的yum源 1sudo vi /etc/yum.repos.d/mongodb-org-4.2.repo 编写内容如下： 123456[mongodb-org-4.2]name=MongoDB Repositorybaseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/4.2/x86_64/gpgcheck=1enabled=1gpgkey=https://www.mongodb.org/static/pgp/server-4.2.asc 3.2安装执行 yum 指令安装 1sudo yum install mongodb-org 提示信息如下 12345678910111213141516171819202122232425262728MongoDB Repository 1.9 kB/s | 6.6 kB 00:03Dependencies resolved.======================================================================================================================================================================================================== Package Arch Version Repository Size========================================================================================================================================================================================================Installing: mongodb-org x86_64 4.2.5-1.el8 mongodb-org-4.2 10 kInstalling dependencies: python2 x86_64 2.7.16-12.module_el8.1.0+219+cf9e6ac9 AppStream 109 k python2-libs x86_64 2.7.16-12.module_el8.1.0+219+cf9e6ac9 AppStream 6.0 M python2-pip-wheel noarch 9.0.3-14.module_el8.1.0+219+cf9e6ac9 AppStream 1.2 M python2-setuptools-wheel noarch 39.0.1-11.module_el8.1.0+219+cf9e6ac9 AppStream 289 k mongodb-org-mongos x86_64 4.2.5-1.el8 mongodb-org-4.2 15 M mongodb-org-server x86_64 4.2.5-1.el8 mongodb-org-4.2 25 M mongodb-org-shell x86_64 4.2.5-1.el8 mongodb-org-4.2 17 M mongodb-org-tools x86_64 4.2.5-1.el8 mongodb-org-4.2 62 MInstalling weak dependencies: python2-pip noarch 9.0.3-14.module_el8.1.0+219+cf9e6ac9 AppStream 2.0 M python2-setuptools noarch 39.0.1-11.module_el8.1.0+219+cf9e6ac9 AppStream 643 kEnabling module streams: python27 2.7Transaction Summary========================================================================================================================================================================================================Install 11 PackagesTotal download size: 129 MInstalled size: 321 M 确认无误，按y安装 12345678warning: /var/cache/dnf/mongodb-org-4.2-fddc3ec541fac48b/packages/mongodb-org-4.2.5-1.el8.x86_64.rpm: Header V3 RSA/SHA1 Signature, key ID 058f8b6b: NOKEYMongoDB Repository 862 B/s | 1.7 kB 00:01Importing GPG key 0x058F8B6B: Userid : &quot;MongoDB 4.2 Release Signing Key &lt;packaging@mongodb.com&gt;&quot; Fingerprint: E162 F504 A20C DF15 827F 718D 4B7C 549A 058F 8B6B From : https://www.mongodb.org/static/pgp/server-4.2.ascIs this ok [y/N]: 四、配置注意，以下带*的小节为非必需项，因为 yum 安装、安装包安装会自动配置。 4.1 mongod.conf 配置1vi /etc/mongod.conf 4.2 端口与ipMongoDB 安装完默认只能通过本地mongo shell访问，绑定当前设备的IP，让其它设备能够访问MongoDB，其中port为MongoDB监听的端口号。 1234# network interfacesnet: port: 27017 bindIp: 0.0.0.0 # Enter 0.0.0.0,:: to bind to all IPv4 and IPv6 addresses or, alternatively, use the net.bindIpAll setting. 4.3 安全认证* 推荐在首次设置完超级管理员账号后开启 12security: authorization: enabled 4.4 加入系统 service注意：本小节不需要操作，yum 安装mongo-org时已经自动配置了。创建 mongod 的 service 文件 1sudo vi /usr/lib/systemd/system/mongod.service 添加以下内容 12345678910111213141516171819202122232425262728293031323334353637[Unit]Description=MongoDB Database ServerDocumentation=https://docs.mongodb.org/manualAfter=network.target[Service]User=mongodGroup=mongodEnvironment=&quot;OPTIONS=-f /etc/mongod.conf&quot;EnvironmentFile=-/etc/sysconfig/mongodExecStart=/usr/bin/mongod $OPTIONSExecStartPre=/usr/bin/mkdir -p /var/run/mongodbExecStartPre=/usr/bin/chown mongod:mongod /var/run/mongodbExecStartPre=/usr/bin/chmod 0755 /var/run/mongodbPermissionsStartOnly=truePIDFile=/var/run/mongodb/mongod.pidType=forking# file sizeLimitFSIZE=infinity# cpu timeLimitCPU=infinity# virtual memory sizeLimitAS=infinity# open filesLimitNOFILE=64000# processes/threadsLimitNPROC=64000# locked memoryLimitMEMLOCK=infinity# total threads (user+kernel)TasksMax=infinityTasksAccounting=false# Recommended limits for for mongod as specified in# http://docs.mongodb.org/manual/reference/ulimit/#recommended-settings[Install]WantedBy=multi-user.target 创建系统服务软链接 1ln -s /usr/lib/systemd/system/mongod.service /etc/systemd/system/multi-user.target.wants/ 重新加载系统服务 1systemctl daemon-reload 4.5 配置防火墙123sudo firewall-cmd --add-port 27017/tcp --permanentsudo firewall-cmd --reloadsudo firewall-cmd --list-ports 4.6 配置 SELinux目前的SELinux策略不允许MongoDB进程访问 /sys/fs/cgroup，这是确定系统上可用内存所必需的。 如果打算以enforcing模式运行SELinux，则需要对SELinux策略进行调整。 有两种方式，第一种是关闭SELinux，也是最简单的方式。第二种是配置 SELinux 的安全策略。（1）关闭 SELinux临时关闭，重启失效 1setenforce 0 永久关闭打开 SELinux 配置文件 1sudo vi /etc/selinux/config 修改 SELINUX 的值 1SELINUX=disabled 重启生效，若不重启，配合方法一临时关闭。（2）配置 SELinux 策略 确保你的系统安装了checkpolicy软件，可以简单通过yum 下载安装： 1sudo yum install checkpolicy 创建一个mongo策略的文件 mongodb_cgroup_memory.te： 1234567891011121314cat &gt; mongodb_cgroup_memory.te &lt;&lt;EOFmodule mongodb_cgroup_memory 1.0;require { type cgroup_t; type mongod_t; class dir search; class file { getattr open read };}#============= mongod_t ==============allow mongod_t cgroup_t:dir search;allow mongod_t cgroup_t:file { getattr open read };EOF 创建好后，可以通过以下三个就可以编译并加载自定义的策略模块： 123checkmodule -M -m -o mongodb_cgroup_memory.mod mongodb_cgroup_memory.tesemodule_package -o mongodb_cgroup_memory.pp -m mongodb_cgroup_memory.modsudo semodule -i mongodb_cgroup_memory.pp 12Job for mongod.service failed because the control process exited with error code.See &quot;systemctl status mongod.service&quot; and &quot;journalctl -xe&quot; for details. 4.7 创建超级用户在mongo shell中，在admin数据库中添加一个具有userAdminAnyDatabase角色，以及readWriteAnyDatabase角​​色。 技巧从mongo shell的4.2版本开始，可以使用方法passwordPrompt()，与各种用户身份验证/管理方法/命令等结合使用，以提示输入密码，而不是直接在方法/命令调用中明文指定密码。 但是，仍然可以像使用早期版本的mongo shell一样直接指定密码。（不安全） 12345678use admindb.createUser( { user: &quot;jeremy&quot;, pwd: passwordPrompt(), // or cleartext password roles: [ { role: &quot;userAdminAnyDatabase&quot;, db: &quot;admin&quot; }, &quot;readWriteAnyDatabase&quot; ] }) 在提示输入密码时，输入自己的管理员密码即可。然后结束mongod。 1db.adminCommand( { shutdown: 1 } ) 重启mongod 1systemctl restart mongod 五、MongoDB 服务操作启动服务 1systemctl start mongod 关闭服务 1systemctl stop mongod 重启服务 1systemctl restart mongod 查看服务状态 1systemctl status mongod 六、坑启动服务失败，通过查看服务状态，得到退出状态码2，配置问题。 12345678● mongod.service - MongoDB Database Server Loaded: loaded (/usr/lib/systemd/system/mongod.service; enabled; vendor preset: disabled) Active: failed (Result: exit-code) since Fri 2020-04-03 11:06:18 CST; 10min ago Docs: https://docs.mongodb.org/manual Process: 16855 ExecStart=/usr/bin/mongod $OPTIONS (code=exited, status=2) Process: 16853 ExecStartPre=/usr/bin/chmod 0755 /var/run/mongodb (code=exited, status=0/SUCCESS) Process: 16851 ExecStartPre=/usr/bin/chown mongod:mongod /var/run/mongodb (code=exited, status=0/SUCCESS) Process: 16849 ExecStartPre=/usr/bin/mkdir -p /var/run/mongodb (code=exited, status=0/SUCCESS) 查看配置文件 1234# network interfacesnet: port: 27017 bindIp: 0.0.0.0,:: 觉得没问题，查看官方文档说明 123456net: port: &lt;int&gt; bindIp: &lt;string&gt; maxIncomingConnections: &lt;int&gt; wireObjectCheck: &lt;boolean&gt; ipv6: &lt;boolean&gt; bindIp的传参是String，于是我加了‘’，OK。 1234# network interfacesnet: port: 27017 bindIp: ’0.0.0.0,::‘ 七、MongoDB社区版说明 包名 说明 mongodb-org 一个元软件包，它将自动安装下面列出的四个组件软件包。 mongodb-org-server 包含mongod守护程序，关联的init脚本和配置文件（/etc/mongod.conf）。 您可以使用初始化脚本从配置文件启动mongod。 有关详细信息，请参阅运行MongoDB社区版。 mongodb-org-mongos 包含mongos守护程序。 mongodb-org-shell 包含mongo shell。 mongodb-org-tools 包含以下MongoDB工具: mongoimport bsondump, mongodump, mongoexport, mongofiles, mongorestore, mongostat, and mongotop. 八、参考文档mongoDB 官方docs.","link":"/2020/04/04/install-lastest-mongodb/"},{"title":"CentOS 8安装最新Oracle19c数据库","text":"介绍目前 Oracle 官方推荐安装19c 的 linux 版本为Linux 7，不过强制安装到CentOS 8上，还是可以用的，接下来就来介绍怎么安装。 安装 Oracle Database 19c安装Oracle Database 相关依赖推荐先安装Oracle官方yum仓库，主要是为了通过yum安装 oracle-database-preinstall-19c.x86_64，来帮助我们完成 Oracle Databse 19c 的依赖检查安装。 注意：有时候dnf -y install 可能因为未导入证书或其他原因没能创建成功事务，若没看到：Complete!，再执行一遍dnf -y install … 123cd /etc/yum.repos.d/sudo curl -O http://yum.oracle.com/public-yum-ol7.reposudo dnf -y install oracle-database-preinstall-19c.x86_64 安装Oracle依赖的lib库 1sudo dnf -y install libnsl 安装Oracle Database首先导入Oracle 官方的GPG KEY(可不做) 12cd /etc/pki/rpm-gpg/sudo curl -o RPM-GPG-KEY-oracle http://public-yum.oracle.com/RPM-GPG-KEY-oracle-ol7 前置工作都做完了，切换到Oracle安装包的目录，现在是正式安装Oracle Database了。 1sudo rpm -ivh oracle-database-ee-19c-1.0-1.x86_64.rpm --nodigest 初始化Oracle Database 19c创建自己的CDB初始化配置文件复制一份Oracle样本配置，并打开 12sudo cp /etc/init.d/oracledb_ORCLCDB-19c /etc/init.d/oracledb_JRMCDB-19csudo vi /etc/init.d/oracledb_JRMCDB-19c 主要是修改环境变量配置，如CDB，PDB等。 12export ORACLE_SID=JRMCDBexport PDB_NAME=JRMPDB1 复制配置文件 12sudo cp /etc/sysconfig/oracledb_ORCLCDB-19c.conf /etc/sysconfig/oracledb_JRMCDB-19c.confsudo vi /etc/sysconfig/oracledb_JRMCDB-19c.conf 因为只有一个Oracle SID实例，不会冲突，所以这里不改端口配置等。 配置并创建Oracle SID实例1sudo /etc/init.d/oracledb_JRMCDB-19c configure 如果看到以下这句话，就安装完成了。 Database configuration completed successfully. 登录并修改Oracle Database管理员账号修改oracle用户密码在root账号下，修改oracle用户密码 1passwd oracle 切换oracle账号 1su - oracle 添加系统环境变量 1vi .bash_profile 添加以下内容 123export ORACLE_HOME=/opt/oracle/product/19c/dbhome_1export PATH=$PATH:$ORACLE_HOME/binexport ORACLE_SID=JRMCDB 加载环境配置 1source .bash_profile 登录oracle修改管理员密码以数据库管理员登录，需要在orace账号下登录 1sqlplus / as sysdba 修改密码 1alter user system identified by &quot;123456&quot;; 创建Oracle账号切换容器切换到我们创建的PDB 1alter session set container=JRMPDB1; 创建用户 1create user jeremy identified by &quot;123456&quot;; 授权用户 1GRANT CREATE SESSION,CREATE TABLE,CREATE VIEW,CREATE PROCEDURE,CREATE SEQUENCE to jeremy;","link":"/2020/05/15/how-to-install-oracle-19c-in-centos-8/"},{"title":"MySQL通过yum源安装最新版本教程","text":"介绍截至目前，MYSQL最新的版本为4月23号官方发布的8.0.20版本，本文主要讲解CentOS 8 如何通过yum源安装 最新mysql-community-server-8.0.20版本。 安装官方yum源官方仓库下载yum源安装包进入MySQL官方仓库^1, 在首页，最近的新版本仓库源安装包都会在这里，如果你对自己的系统了解，你可以直接找到自己Linux平台对应的官方源安装包直接安装。MySQL官方分别管理了yum源和apt源，进入里面，你就可以看到各个MySQL版本的安装包了。我的Linux为CentOS 8.1, arch为 x86_64，进到对应目录 https://repo.mysql.com/yum/mysql-8.0-community/el/8/x86_64/，在这里，看到各种MySQL相关的安装包，其中的mysql80-community-release字样的就是官方yum源的安装包，在首页也能找到，因为是CentOS8系统，直接首页浏览器搜索el8字样，就能看到一样的yum源安装包，最新的是mysql80。 安装MySQL GPG 公钥（可选） 123cd /etc/pki/rpm-gpg/sudo curl -O https://repo.mysql.com/RPM-GPG-KEY-mysqlsudo rpm --import RPM-GPG-KEY-mysql 若不安装公钥，则会提示以下警告，但不影响安装。 1warning: mysql80-community-release-el8-1.noarch.rpm: Header V3 DSA/SHA1 Signature, key ID 5072e1f5: NOKEY 下载镜像源 12mkdir ~/mysql &amp;&amp; cd ~/mysqlcurl -O https://repo.mysql.com/yum/mysql-8.0-community/el/8/x86_64/mysql80-community-release-el8-1.noarch.rpm 安装镜像源 1sudo rpm -ivh mysql80-community-release-el8-1.noarch.rpm 查看mysql仓库 1dnf repolist enabled | grep &quot;mysql.*-community.*&quot; 通过官方yum源安装最新MySQL1sudo dnf install --repo=BaseOS,mysql80-community mysql-community-server * 非yum安装最新版MySQL上述的rpm安装包都可以在官网下载页面下载得到。 yum源安装包 MySQL安装包 下载下来通过sudo yum -localinstall filename 即可安装 初步配置MySQL首次启动初始化MySQL假设服务器的数据目录为空，执行以下命令后，即为服务器首次启动，会发生以下情况： 服务器已初始化。 SSL证书和密钥文件在数据目录中生成。 validate_password已安装并启用。 创建超级用户帐户“ root” @“ localhost”。 1sudo systemctl start mysqld 设置root账号初始化信息、设置超级用户的密码、错误信息都存储在日志文件中。 查看随机密码，使用以下命令： 1sudo grep 'temporary password' /var/log/mysqld.log 通过使用生成的临时密码登录 1mysql -uroot -p 更改root密码 1ALTER USER 'root'@'localhost' IDENTIFIED BY 'Jeremy!1'; 注意： 默认情况下安装validate_password。 validate_password实现的默认密码策略要求密码至少包含一个大写字母，一个小写字母，一位数字和一个特殊字符，并且密码总长度至少为8个字符。 开通端口123sudo firewall-cmd --add-port 3306/tcp --zone=public --permanentsudo firewall-cmd --reloadsudo firewall-cmd --list-ports","link":"/2020/05/12/install-lastest-mysql-by-yum/"}],"tags":[{"name":"mongodb","slug":"mongodb","link":"/tags/mongodb/"},{"name":"oracle","slug":"oracle","link":"/tags/oracle/"},{"name":"mysql","slug":"mysql","link":"/tags/mysql/"}],"categories":[{"name":"SQL","slug":"SQL","link":"/categories/SQL/"}]}